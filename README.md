# 一个登录Suda网关的自动化脚本

## 环境需求

基于 Selenium 实现

我的环境如下, 完整的 requirements.txt 也放在项目中了

```python
selenium==4.28.1
python==3.11.3
```

但是应该只要装了selenium就好,(开个虚拟环境后)运行

```bash
pip install selenium
```

## 食用方法

- 可以把账号密码硬修改进代码里，然后运行即可
- 也可以使用 toml 配置文件, 放在这个py脚本同一个目录下 (适应需要动态修改登录者的情况)

```toml
# 一个toml文件示例 如果是修改代码则也是修改对应的
usr = "2227406666"  # 改成你的学号
pwd = "yuan is god" # 改成你的密码
vendor = "中国电信" # 一定要完全对应网关提供的选项。(例如"电信"就是不行的)
```

自动登录脚本会有返回值 0 1 2 来方便自动化调用

- 0 正常完成登录
- 1 没有登录成功
- 2 已经登录，没有进行登录操作

自动注销脚本会有返回值 0 1 2 来方便克服学校的烂代码，自动化调用

- 0 正常完成注销
- 1 已经登录，但是注销失败
- 2 没有登录，没有进行注销操作

## 闲谈

这个比较适合一台机器需要长时间挂在学校里，但是有时候网又会莫名其妙给你下线，或者是你不小心注销后，导致无法访问公网同时又不知道局域网IP(有时候会变化，尤其是使用WIFI的情况下)导致无法访问的情况。

执行过程中会有一些控制台报错，但好像不影响执行，就先忽略了

学校的自动注销有问题，大概平均需要注销两次才能成功注销。

如果有好的改进想法欢迎各位大佬提供~ 没有测试过所有可能情况,有BUG也欢迎大家提!我菜菜轻喷QAQ

猜猜那个 $\mathfrak{G}\mathfrak{O}\mathfrak{D}$ 的 $\mathfrak{Y} \mathfrak{U} \mathfrak{A} \mathfrak{N}$ 是谁 AWA

## 代办

- [x] 之后会准备再写一个自动注销来搭配做切换账号。(已经完成力)
- [ ] 登录注销的实质应该是发一个POST请求之类的(猜的)，看看能不能获取请求的格式然后直接发就好了，不用在浏览器上自动化操作

## 更新日志

- 2025-3-1  给了一个 shell 的脚本
- 2025-3-1  更新了自动注销脚本，使得多次尝试尽可能地断联，而不是一次就不尝试了
- 2025-2-28 完成了自动注销脚本，并且为两个脚本增加了返回值判断执行状态
